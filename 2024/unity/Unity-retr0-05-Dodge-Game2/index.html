<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>[Unity] 닷지 게임 - 탄알/탄알생성기 | Sangjjangit</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="[Unity] 닷지 게임 - 탄알/탄알생성기" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="유니티의 닷지 게임을 만들며 익히기" />
<meta property="og:description" content="유니티의 닷지 게임을 만들며 익히기" />
<link rel="canonical" href="/2024/unity/Unity-retr0-05-Dodge-Game2/" />
<meta property="og:url" content="/2024/unity/Unity-retr0-05-Dodge-Game2/" />
<meta property="og:site_name" content="Sangjjangit" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-10-05T05:50:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="[Unity] 닷지 게임 - 탄알/탄알생성기" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-10-05T05:50:00+00:00","datePublished":"2024-10-05T05:50:00+00:00","description":"유니티의 닷지 게임을 만들며 익히기","headline":"[Unity] 닷지 게임 - 탄알/탄알생성기","mainEntityOfPage":{"@type":"WebPage","@id":"/2024/unity/Unity-retr0-05-Dodge-Game2/"},"url":"/2024/unity/Unity-retr0-05-Dodge-Game2/"}</script>
<!-- End Jekyll SEO tag -->

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sangjjangit</title>
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/nav-menu.css">
    <link rel="stylesheet" href="/assets/css/md2.css">
    <link rel="stylesheet" href="/assets/css/post-list.css">
    <link rel="stylesheet" href="/assets/css/syntax.css">
    <!-- <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/default.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script> -->

    <!-- site-search -->
    <meta name="google-site-verification" content="hOqiLm-b8Xc-VENt1dN1OpAvI2gWGwlr6lcboTsAJVg" />
    <meta name="naver-site-verification" content="37d97b6c4072831a48f456a7704a79f5d8aee979" />

    <!-- google-adsense -->
    <meta name="google-adsense-account" content="ca-pub-8541064564180007">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8541064564180007"
     crossorigin="anonymous"></script>
</head>
<body>
<header>
    <h1>
        <a href="/">Sangjjangit</a>
    </h1>
    <small>요약/실습</small>
<!--    <p>summy reading books</p>-->
    <nav>
        <ul class="nav-menu">
            
            <li><a href="/">All</a></li>
            
            <li><a href="/category/Unity/">Unity</a></li>
            
            <li><a href="/category/Blender/">Blender</a></li>
            
        </ul>
    </nav>
</header>

<main>
    <article>
    <h1>[Unity] 닷지 게임 - 탄알/탄알생성기</h1>
    <p><em>Posted on 2024-10-05 05:50:00</em></p>
    <div>
        <h3 id="닷지-게임">닷지 게임</h3>

<ul>
  <li>예제소스 : <a href="https://github.com/IJEMIN/Unity-Programming-Essence-2021">https://github.com/IJEMIN/Unity-Programming-Essence-2021</a></li>
  <li>예제번호 : 06, 07, 08</li>
</ul>

<ol>
  <li>탄알 오브젝트 준비
    <ul>
      <li>하이어리키(Hierarchy) 창 &gt; 3D Object &gt; Sphere</li>
      <li>인스펙터(Inspector) 창
        <ul>
          <li>이름, 위치, 스케일 수정</li>
          <li>리지드바디(Rigidbody) 컴포넌트 추가 : 상호작용 오브젝트이므로, 중력을 무시할 수 있게, Use Gravitiy 체크 해제</li>
        </ul>
      </li>
      <li>프로젝트(Project) 창 &gt; Material
        <ul>
          <li>색상을 선택하고, 하이어리키(Hierarchy) 창에 있는 탄알 오브젝트에 드래그&amp;드랍으로 색상 적용</li>
        </ul>
      </li>
      <li>콜라이더 : 콜라이더를 가진 오브젝트와 충돌하면 튕겨나간다.
        <ul>
          <li>
            <dl>
              <dt>트리거 콜라이더</dt>
              <dd>충돌한 물체를 밀어내는 표면이 없다.</dd>
              <dd>그래서 다른 일반 콜라이더와 겹치거나 서로를 뚫고 지나갈 수 있지만 충돌 자체는 감지한다.</dd>
              <dd>ex) 플레이어가 특정 영역으로 진입했는지 검사할 때 사용을 많이 한다.
보이지 않는 트리거 콜라이더를 배치하고, 플레이어가 통과하면 새로운 적, 컷씬을 재생하는 방식으로 사용한다.</dd>
            </dl>
          </li>
        </ul>
      </li>
      <li>프리탭 : 언제든지 재사용할 수 있는 미리 만들어진 게임 오브젝트 에셋(파일)이다.</li>
      <li>프리탭 만들기 : 하이어리키(Hierarchy) 창에 있는 탄알 오브젝트를 프로젝트(Project) 창으로 드래그&amp;드랍한다.</li>
    </ul>
  </li>
  <li>스크립트 준비
    <ul>
      <li>프로젝트(Project) 창 &gt; C# Script
        <div class="language-c# highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
<span class="cm">/**/</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">Bullet</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
 <span class="k">public</span> <span class="kt">float</span> <span class="n">speed</span> <span class="p">=</span> <span class="m">8f</span><span class="p">;</span> <span class="c1">// 속도</span>
 <span class="k">private</span> <span class="n">Rigidbody</span> <span class="n">bulletRigidbody</span><span class="p">;</span> <span class="c1">// 리지드바디 컴포넌트</span>
 <span class="c1">// Start is called before the first frame update</span>
 <span class="k">void</span> <span class="nf">Start</span><span class="p">()</span>
 <span class="p">{</span>
   <span class="c1">// 리지드바디 컴포넌트 할당</span>
   <span class="n">bulletRigidbody</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;();</span> 
   <span class="c1">// 리지드바디 속도 = 앞쪽 방향 * 속도</span>
   <span class="n">bulletRigidbody</span><span class="p">.</span><span class="n">velocity</span> <span class="p">=</span> <span class="n">transform</span><span class="p">.</span><span class="n">forward</span> <span class="p">*</span> <span class="n">speed</span><span class="p">;</span> 

   <span class="c1">// 3초 뒤에 자신의 오브젝트 파괴</span>
   <span class="nf">Destroy</span><span class="p">(</span><span class="n">gameObject</span><span class="p">,</span> <span class="m">3f</span><span class="p">);</span>
 <span class="p">}</span>
 <span class="c1">// 트리거 충돌시 자동 실행</span>
 <span class="k">void</span> <span class="nf">OnTriggerEnter</span><span class="p">(</span><span class="n">Collider</span> <span class="n">other</span><span class="p">)</span> <span class="p">{</span>
   <span class="c1">// 충돌한 상태 오브젝트 태그정보 가져 오기</span>
   <span class="k">if</span><span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">tag</span> <span class="p">==</span> <span class="s">"Player"</span><span class="p">)</span> <span class="p">{</span>
       <span class="c1">// 상대방 PlayerController 컴포넌트 가져오기</span>
       <span class="n">PlayerController</span> <span class="n">playerController</span> <span class="p">=</span> <span class="n">other</span><span class="p">.</span><span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">PlayerController</span><span class="p">&gt;();</span>
       <span class="c1">// </span>
       <span class="k">if</span><span class="p">(</span><span class="n">playerController</span> <span class="p">!=</span> <span class="k">null</span><span class="p">){</span>
           <span class="c1">// 상대방 오브젝트 Die() 실행</span>
           <span class="n">playerController</span><span class="p">.</span><span class="nf">Die</span><span class="p">();</span>
       <span class="p">}</span>
   <span class="p">}</span>
 <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>충돌처리
    <ul>
      <li>오브젝트 A,B가 충돌하면, A와 B는 자신이 충돌했다는 사실을 모른다.</li>
      <li>그 대신 충돌했음을 알려주는 메시지를 A,B에 보낸다.</li>
      <li>A에는 충돌한 상대방 B정보를 전달.</li>
      <li>B에는 충돌한 상대방 A정보를 전달.</li>
      <li>메시지 기반 방식</li>
      <li>리지드바디 컴포넌트를 가지고 있어야 한다.</li>
      <li>충돌 메시지에 대응하는 메소드를 충돌 이벤트 메서드라고 부른다.</li>
      <li>충돌 이벤트 메소드</li>
      <li>OnCollision 계열 : 일반 충돌
        <ul>
          <li>OnCollisionEnter(Collision collision) : 충돌한 순간</li>
          <li>OnCollisionStay(Collision collision) : 충돌하는 동안</li>
          <li>OnCollisionExit(Collision collision) : 충돌했다가 분리되는 순간</li>
        </ul>
      </li>
      <li>OnTrigger 계열 : 트리거 계열
        <ul>
          <li>OnTriggerEnter(Collider other) : 충돌한 순간</li>
          <li>OnTriggerStay(Collider other) : 충돌하는 동안</li>
          <li>OnTriggerExit(Collider other) : 충돌했다가 분리되는 순간</li>
          <li>트리거 충돌은 일반적인 충돌과 달리 서로를 밀어내지 않고 그대로 통과한다.</li>
        </ul>
      </li>
      <li>충돌 감지 구현</li>
      <li>OnTriggerEnter() 메서드 작성</li>
      <li>프로젝트(Project) 창의 탄알 스크립트를 하이어리키(Hierarchy) 창에 탄알 오브젝트에 드래그&amp;드랍</li>
      <li>하이어리키(Hierarchy) 창에 탄알 오브젝트를 선택하고, 인스펙터(Inspector) 창에 Overrides &gt; Apply All 클릭.</li>
      <li>Apply All 을 클릭하면 프리팹과 연동된 게임 오브젝트의 변경 사항이 프리팹에 반영된다.</li>
      <li>탄알 생성기로 탄알이 생성하므로, 하이어리키(Hierarchy) 창에 탄알 오브젝트는 삭제한다.</li>
    </ul>
  </li>
  <li>탄알 생성기 오브젝트 만들기
    <ul>
      <li>탄알을 생성하고 플레이어를 향해 발사한다.</li>
      <li>하이어리키(Hierarchy) 창 &gt; 3D Object &gt; Cylinder</li>
      <li>인스펙터(Inspector) 창
        <ul>
          <li>이름, 위치, 스케일 수정</li>
        </ul>
      </li>
      <li>프로젝트(Project) 창 &gt; Material
        <ul>
          <li>Bullet 색상을 선택하고, 하이어리키(Hierarchy) 창에 있는 탄알 생성기 오브젝트에 드래그&amp;드랍으로 색상 적용</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>탄알 생성기 스크립트
    <ul>
      <li>프로젝트(Project) 창 &gt; C# Script
        <div class="language-c# highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
<span class="cm">/**/</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">BulletSpawner</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
 <span class="k">public</span> <span class="n">GameObject</span> <span class="n">bulletPrefab</span><span class="p">;</span> <span class="c1">// 생성할 탄알의 원본 프리팹</span>
 <span class="k">public</span> <span class="kt">float</span> <span class="n">spawnRateMin</span> <span class="p">=</span> <span class="m">0.5f</span><span class="p">;</span> <span class="c1">// 최소 생성주기</span>
 <span class="k">public</span> <span class="kt">float</span> <span class="n">spawnRateMax</span> <span class="p">=</span> <span class="m">3f</span><span class="p">;</span> <span class="c1">// 최대 생성주기</span>
 <span class="c1">//</span>
 <span class="k">private</span> <span class="n">Transform</span> <span class="n">target</span><span class="p">;</span> <span class="c1">// 발사대상</span>
 <span class="k">private</span> <span class="kt">float</span> <span class="n">spawnRate</span><span class="p">;</span> <span class="c1">// 생성주기</span>
 <span class="k">private</span> <span class="kt">float</span> <span class="n">timeAfterSpawn</span><span class="p">;</span> <span class="c1">// 최근 생성시점에서 지난 시간</span>
 <span class="c1">// Start is called before the first frame update</span>
 <span class="k">void</span> <span class="nf">Start</span><span class="p">()</span>
 <span class="p">{</span>
   <span class="c1">// 최근 생성 이후의 누적 시간을 0 초기화</span>
   <span class="n">timeAfterSpawn</span> <span class="p">=</span> <span class="m">0f</span><span class="p">;</span>
   <span class="c1">// 탄알 생성간격, 랜덤지정</span>
   <span class="n">spawnRate</span> <span class="p">=</span> <span class="n">Random</span><span class="p">.</span><span class="nf">Range</span><span class="p">(</span><span class="n">spawnRateMin</span><span class="p">,</span> <span class="n">spawnRateMax</span><span class="p">);</span>
   <span class="c1">// PlayerController 컴포넌트를 찾아 조준 대상으로 설정</span>
   <span class="n">target</span> <span class="p">=</span> <span class="n">FindObjectOfType</span><span class="p">&lt;</span><span class="n">PlayerController</span><span class="p">&gt;().</span><span class="n">transform</span><span class="p">;</span>
 <span class="p">}</span>
 <span class="c1">// Update is called once per frame</span>
 <span class="k">void</span> <span class="nf">Update</span><span class="p">()</span>
 <span class="p">{</span>
   <span class="c1">// 갱신</span>
   <span class="n">timeAfterSpawn</span> <span class="p">+=</span> <span class="n">Time</span><span class="p">.</span><span class="n">deltaTime</span><span class="p">;</span>

   <span class="k">if</span><span class="p">(</span><span class="n">timeAfterSpawn</span> <span class="p">&gt;=</span> <span class="n">spawnRate</span><span class="p">){</span>
       <span class="c1">// 초기화            </span>
       <span class="n">timeAfterSpawn</span> <span class="p">=</span> <span class="m">0f</span><span class="p">;</span>
       <span class="c1">// bulletPrefab 의 복제본을 위치, 회전으로 생성</span>
       <span class="n">GameObject</span> <span class="n">bullet</span> <span class="p">=</span> <span class="nf">Instantiate</span><span class="p">(</span><span class="n">bulletPrefab</span><span class="p">,</span> <span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">,</span> <span class="n">transform</span><span class="p">.</span><span class="n">rotation</span><span class="p">);</span>
       <span class="c1">// 생성한 탄알을 정면 방향이 target을 향하도록 회전</span>
       <span class="n">bullet</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="nf">LookAt</span><span class="p">(</span><span class="n">target</span><span class="p">);</span>
       <span class="c1">// 다음 생성간격</span>
       <span class="n">spawnRate</span> <span class="p">=</span> <span class="n">Random</span><span class="p">.</span><span class="nf">Range</span><span class="p">(</span><span class="n">spawnRateMin</span><span class="p">,</span> <span class="n">spawnRateMax</span><span class="p">);</span>
   <span class="p">}</span>
 <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ol>

<ul>
  <li>Time.deltaTime : 이전 프레임과 현재 프레임 사이의 시간 간격이 자동으로 할당된다.</li>
  <li>Instantiate() : 게임 도중 실시간으로 오브젝트를 생성할 때, 사용한다. 원본 오브젝트를 주면 복제한 오브젝트를 생성한다.</li>
</ul>

<hr />

    </div>
    
    <div class="back-to-home">
        <!-- <a href="/">Back to Home</a> -->
        <a href="javascript:window.history.back();">Back to Previous Page</a>
    </div>
</article>
</main>

<footer>
    <p>&copy; 2024 Sangjjangit</p>
</footer>
</body>
</html>